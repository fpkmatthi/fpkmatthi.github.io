<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Setting up my website enviroment :: A personal knowledge base — A simple, retro theme for Hugo</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Portfolio This write-up is about how I set up my repo, travis ci and docker container to work on my portfolio.
ref: https://inside.getambassador.com/creating-and-deploying-your-first-hugo-site-to-github-pages-1e1f496cf88d
Content  Kick-off Docker Hugo Github Pages Conclusion  Kick-off Create and open a new project folder
mkdir -p ~/portfolio cd ~/portfolio Docker Install docker (refer to the Arch Wiki) sudo pacman -S docker Creating docker image Alpine Linux is used as the base image
FROMalpine:latestRUN apk add --no-cache \  curl \  git \  openssh-client \  rsync \  bash \  hugoENV VERSION=0."/>
<meta name="keywords" content=", "/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="http://fpkmatthi.xyz/posts/hello_world/" />


<link rel="stylesheet" href="http://fpkmatthi.xyz/assets/style.css">

  <link rel="stylesheet" href="http://fpkmatthi.xyz/assets/blue.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://fpkmatthi.xyz/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="http://fpkmatthi.xyz/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Setting up my website enviroment :: A personal knowledge base — A simple, retro theme for Hugo" />
<meta name="twitter:description" content="Portfolio This write-up is about how I set up my repo, travis ci and docker container to work on my portfolio.
ref: https://inside.getambassador.com/creating-and-deploying-your-first-hugo-site-to-github-pages-1e1f496cf88d
Content  Kick-off Docker Hugo Github Pages Conclusion  Kick-off Create and open a new project folder
mkdir -p ~/portfolio cd ~/portfolio Docker Install docker (refer to the Arch Wiki) sudo pacman -S docker Creating docker image Alpine Linux is used as the base image
FROMalpine:latestRUN apk add --no-cache \  curl \  git \  openssh-client \  rsync \  bash \  hugoENV VERSION=0." />
<meta name="twitter:site" content="http://fpkmatthi.xyz" />
<meta name="twitter:creator" content="Matthias Van De Velde" />
<meta name="twitter:image" content="http://fpkmatthi.xyz/img/digi_world.jpg">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Setting up my website enviroment :: A personal knowledge base — A simple, retro theme for Hugo">
<meta property="og:description" content="Portfolio This write-up is about how I set up my repo, travis ci and docker container to work on my portfolio.
ref: https://inside.getambassador.com/creating-and-deploying-your-first-hugo-site-to-github-pages-1e1f496cf88d
Content  Kick-off Docker Hugo Github Pages Conclusion  Kick-off Create and open a new project folder
mkdir -p ~/portfolio cd ~/portfolio Docker Install docker (refer to the Arch Wiki) sudo pacman -S docker Creating docker image Alpine Linux is used as the base image
FROMalpine:latestRUN apk add --no-cache \  curl \  git \  openssh-client \  rsync \  bash \  hugoENV VERSION=0." />
<meta property="og:url" content="http://fpkmatthi.xyz/posts/hello_world/" />
<meta property="og:site_name" content="Setting up my website enviroment" />
<meta property="og:image" content="http://fpkmatthi.xyz/img/digi_world.jpg">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2020-01-20 00:00:00 &#43;0000 UTC" />











</head>
<body class="">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Matthias Van De Velde
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
      
    

    
    <div class="spacer"></div>
    <ul class="language-selector">
      <ul class="language-selector-current">
          <li>English ▾</li>
      </ul>
      <ul class="language-selector__more hidden">
        
      </ul>
    </ul>
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/posts">Posts</a></li>
      
    
    
    <hr />
        
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="http://fpkmatthi.xyz/posts/hello_world/">Setting up my website enviroment</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2020-01-20
    </span>
    
    
    <span class="post-author">::
      Matthias Van De Velde
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="http://fpkmatthi.xyz/tags/firsttime/">firsttime</a>&nbsp;
    
    #<a href="http://fpkmatthi.xyz/tags/"></a>&nbsp;
    
  </span>
  

  
  <img src="http://fpkmatthi.xyz/img/digi_world.jpg" class="post-cover" />
  

  <div class="post-content">
    <h1 id="portfolio">Portfolio</h1>
<p>This write-up is about how I set up my repo, travis ci and docker container to work on my portfolio.</p>
<p>ref: <a href="https://inside.getambassador.com/creating-and-deploying-your-first-hugo-site-to-github-pages-1e1f496cf88d">https://inside.getambassador.com/creating-and-deploying-your-first-hugo-site-to-github-pages-1e1f496cf88d</a></p>
<h2 id="content">Content</h2>
<ul>
<li>Kick-off</li>
<li>Docker</li>
<li>Hugo</li>
<li>Github Pages</li>
<li>Conclusion</li>
</ul>
<h2 id="kick-off">Kick-off</h2>
<p>Create and open a new project folder</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">mkdir -p ~/portfolio
cd ~/portfolio
</code></pre></div><h2 id="docker">Docker</h2>
<h3 id="install-docker-refer-to-the-arch-wiki">Install docker (refer to the <a href="">Arch Wiki</a>)</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">sudo pacman -S docker
</code></pre></div><h3 id="creating-docker-image">Creating docker image</h3>
<p>Alpine Linux is used as the base image</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> alpine:latest</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> apk add --no-cache <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    git <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    openssh-client <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    rsync <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    bash <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    hugo<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ENV</span> VERSION<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.62.2<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> addgroup -Sg <span style="color:#ae81ff">1000</span> hugo <span style="color:#f92672">&amp;&amp;</span> adduser -SG hugo -u <span style="color:#ae81ff">1000</span> -h /src hugo<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /src</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 1313</span><span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">docker build -t hugo_portfolio .
</code></pre></div><h2 id="hugo">Hugo</h2>
<h3 id="creating-a-new-site">Creating a new site</h3>
<p>Create a new site with hugo.
init the website directory as a new git repo
create a branch for the code
add a theme
commit
push</p>
<p>The <code>code</code> branch contains the code to generate the website.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">docker run --rm -it -v $PWD:/src -u hugo hugo_portfolio hugo new site fpkmatthi.github.io
cd fpkmatthi.github.io

git init

git checkout -b code

echo <span style="color:#e6db74">&#39;/public/&#39;</span> &gt;&gt; .gitignore
sed -r -i <span style="color:#e6db74">&#39;/^\/public\/$/{$!d}&#39;</span> .gitignore

git add .
git commit -m <span style="color:#e6db74">&#34;Initial commit&#34;</span>

<span style="color:#75715e"># git submodule add &lt;link&gt; themes/&lt;theme_name&gt;</span>
git submodule add https://github.com/panr/hugo-theme-terminal.git themes/terminal

git add .

git commit -m <span style="color:#e6db74">&#34;Add theme submodule&#34;</span>

git remote add origin git@github.com:fpkmatthi/portfoli-hug-o.git
git push -u origin code
</code></pre></div><p>The <code>master</code> branch contains the build files.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">docker run --rm <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -it <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -v $PWD:/src <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -u hugo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    hugo_portfolio hugo

HUGO_TEMP_DIR<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>mktemp -d<span style="color:#66d9ef">)</span>
cp -R public/* <span style="color:#e6db74">&#34;</span>$HUGO_TEMP_DIR<span style="color:#e6db74">&#34;</span>

git checkout --orphan master

rm .git/index
git clean -fdx

cp -R <span style="color:#e6db74">&#34;</span>$HUGO_TEMP_DIR<span style="color:#e6db74">&#34;</span>/. .

git add .

git commit -m <span style="color:#e6db74">&#39;initial blog content&#39;</span>
git push -u origin master

<span style="color:#f92672">[</span><span style="color:#f92672">[</span> -d <span style="color:#e6db74">&#34;</span>$HUGO_TEMP_DIR<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span><span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> rm -rf <span style="color:#e6db74">&#34;</span>$HUGO_TEMP_DIR<span style="color:#e6db74">&#34;</span>
</code></pre></div><p>Build and serve the site locally.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">docker run --rm <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -it <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -v $PWD:/src <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -p 1313:1313 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -u hugo hugo_portfolio hugo server <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -w <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --bind<span style="color:#f92672">=</span>0.0.0.0
</code></pre></div><h3 id="linking-githubio">Linking github.io</h3>
<p>Create a personal access token for Travis CI, check the boxes for <code>public_repo</code>, <code>repo:status</code>, <code>repo_deployment</code>.</p>
<p>Set the environment vars for:</p>
<table>
<thead>
<tr>
<th>var</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>GITHUB_USERNAME</td>
<td>fpkmatthi</td>
</tr>
<tr>
<td>GITHUB_TOKEN</td>
<td>75e8b7y318ebf48df0bc35cp4affd79e167b2489</td>
</tr>
<tr>
<td>GITHUB_EMAIL</td>
<td><a href="mailto:fpkmatthi@fpkmatthi.me">fpkmatthi@fpkmatthi.me</a></td>
</tr>
</tbody>
</table>
<p>Activate the repo</p>
<p>Push .travis.yml to the code branch.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">git checkout code
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Yaml" data-lang="Yaml">dist: xenial
language: python
python:
  - <span style="color:#e6db74">&#34;3.7&#34;</span>

before_install:
  - sudo apt-get update -qq
  - sudo apt-get -yq install apt-transport-https tor curl

<span style="color:#75715e"># install - install any dependencies required</span>
install:
    <span style="color:#75715e"># Github may forbid request from travis container, so use tor proxy</span>
    - sudo systemctl start tor
    - download_command=<span style="color:#e6db74">&#39;curl -fsSL -x socks5h://127.0.0.1:9050&#39;</span> <span style="color:#75715e"># --socks5-hostname</span>
    - $download_command -O $($download_command https://api.github.com/repos/gohugoio/hugo/releases/latest | sed -r -n <span style="color:#e6db74">&#39;/browser_download_url/{/Linux-64bit.deb/{s@[^:]*:[[:space:]]*&#34;([^&#34;]*)&#34;.*@\1@g;p;q}}&#39;</span>)
    - sudo dpkg -i hugo<span style="color:#75715e">*.deb</span>
    - rm -rf public <span style="color:#ae81ff">2</span>&gt; /dev/<span style="color:#66d9ef">null</span>

<span style="color:#75715e"># script - run the build script</span>
script:
    - hugo
    - echo <span style="color:#e6db74">&#34;fpkmatthi.xyz&#34;</span> &gt; public/CNAME

deploy:
  provider: pages
  skip-cleanup: <span style="color:#66d9ef">true</span>
  github-token: $GITHUB_TOKEN  <span style="color:#75715e"># Set in travis-ci.org dashboard, marked secure</span>
  email: $GITHUB_EMAIL
  name: $GITHUB_USERNAME
  verbose: <span style="color:#66d9ef">true</span>
  keep-history: <span style="color:#66d9ef">true</span>
  local-dir: public
  target_branch: master  <span style="color:#75715e"># branch contains blog content</span>
  on:
    branch: code  <span style="color:#75715e"># branch contains Hugo generator code</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">git add .
git commit -m <span style="color:#e6db74">&#34;Add travis.yml&#34;</span>
git push
</code></pre></div><p>Add a post</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">docker run --rm -it -v $PWD:/src -u hugo hugo_portfolio hugo new posts/hello_world.md
</code></pre></div><h3 id="some-jedi-mind-tricks">Some Jedi mind tricks</h3>
<p>Create an alias in your shell config file (e.g. .bashrc).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">alias hugo-build<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;docker run --rm -it -v $PWD:/src -u hugo hugo_portfolio hugo&#39;</span>
alias hugo-server<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;docker run --rm -it -v $PWD:/src -p 1313:1313 -u hugo hugo_portfolio hugo server --bind 0.0.0.0&#39;</span>
</code></pre></div><h2 id="using-continuous-integration-to-ease-your-pain">Using Continuous Integration to ease your pain</h2>
<p>Travis CI is now triggerd to build your site when you push something on the <code>code</code> branch. These build files are then pushed to the master branch of the same repo.</p>
<p><a href="https://medium.com/swlh/hosting-a-hugo-blog-on-github-pages-with-travis-ci-e74a1d686f10">https://medium.com/swlh/hosting-a-hugo-blog-on-github-pages-with-travis-ci-e74a1d686f10</a></p>
<p><a href="https://github.com/fpkmatthi/fpkmatthi.github.io">https://github.com/fpkmatthi/fpkmatthi.github.io</a></p>
<p><a href="https://github.com/fpkmatthi/portfoli-hug-o">https://github.com/fpkmatthi/portfoli-hug-o</a></p>
<p><a href="https://github.com/panr/hugo-theme-terminal">https://github.com/panr/hugo-theme-terminal</a></p>

  </div>
  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2020 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="http://fpkmatthi.xyz/assets/main.js"></script>
<script src="http://fpkmatthi.xyz/assets/prism.js"></script>





  
</div>

</body>
</html>
